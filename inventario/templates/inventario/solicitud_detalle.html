{% extends "core/base.html" %}
{% block titlepage %}Detalle solicitud{% endblock %}

{% block principal %}
<div class="container mt-4">

    <h3>Solicitud #{{ solicitud.id }}</h3>
    <p><strong>√Årea:</strong> {{ solicitud.area }}</p>
    <p><strong>Fecha:</strong> {{ solicitud.fecha|date:"Y-m-d H:i" }}</p>
    <p><strong>Estado:</strong>
        <span class="badge 
            {% if solicitud.estado == 'PENDIENTE' %} bg-warning 
            {% elif solicitud.estado == 'APROBADA' %} bg-success 
            {% else %} bg-danger {% endif %}
        ">
            {{ solicitud.estado }}
        </span>
    </p>

    <hr>

    <h5>Items</h5>
    <table class="table">
        <thead>
            <tr>
                <th>Insumo</th>
                <th>Cantidad</th>
                <th>Stock actual</th>
            </tr>
        </thead>
        <tbody>
        {% for item in items %}
            <tr>
                <td>{{ item.insumo.nombre }}</td>
                <td>{{ item.cantidad }}</td>
                <td>{{ item.insumo.stock }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <div class="mt-3">
        {% if solicitud.estado == "PENDIENTE" %}
            <a href="{% url 'inventario:solicitud_aprobar' solicitud.id %}" class="btn btn-success">Aprobar</a>
            <a href="{% url 'inventario:solicitud_rechazar' solicitud.id %}" class="btn btn-danger">Rechazar</a>
        {% endif %}

        <a href="{% url 'inventario:solicitudes_listar' %}" class="btn btn-secondary">Volver</a>
    </div>

</div>
{% endblock %}